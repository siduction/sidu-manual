<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="pt-br">
<head>
	<title>Manuais do siduction - UUID (RO)</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body class="body-main">
<div>
<div id="main-page">
	<div class="divider" id="uuid">
			<h2 id="top-header">Rebuilding fstab and creating mount points</h2>
							<p class="highlight-3">By default siduction uses uuid in your fstab when you install.</p>

							<p>Para mostrar uma nova partição (digamos sda6 ou sdb7), que não aparece na fstab ou não quer ser montada, abra o terminal e digite o seguinte, como usuário ($):</p>

<pre>
 ls -l /dev/disk/by-uuid
</pre>

							<p>Você verá uma saída como esta (o negrito é somente para fins de exemplo):</p>

<pre>
lrwxrwxrwx 1 root root 10 2007-05-27 23:42 348ea9e6-7879-4332-8d7a-915507574a80 -> ../../sda4
lrwxrwxrwx 1 root root 10 2007-05-27 23:42 610aaaeb-a65e-4269-9714-b26a1388a106 -> ../../sda2
lrwxrwxrwx 1 root root 10 2007-05-27 23:42 857c5e63-c9be-4080-b4c2-72d606435051 -> ../../sda5
lrwxrwxrwx 1 root root 10 2007-05-27 23:42 a83b8ede-a9df-4df6-bfc7-02b8b7a5f1f2 -> ../../sda1
lrwxrwxrwx 1 root root 10 2007-05-27 23:42 <b>ad662d33-6934-459c-a128-bdf0393e0f44</b> -> ../../sda6
</pre>

							<p>Nesse exemplo, <b>ad662d33-6934-459c-a128-bdf0393e0f44</b> é o item faltante. O próximo passo é colocar os dados UUID dessa partição no arquivo /etc/fstab. Para isso, abra-o em um editor de texto (como kate ou kwrite), com privilégios de root:</p>
<pre>
# &lt;device file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt; &lt;pass&gt;
<b>UUID=ad662d33-6934-459c-a128-bdf0393e0f44</b> /media/disk1part6 ext4	auto,users,exec	0 2
</pre>
							<p>Outro exemplo:</p>

<pre>
lrwxrwxrwx 1 root root 10 2007-05-28 13:18 30ebb8eb-8f22-460c-b8dd-59140274829d -> ../../sdb8
lrwxrwxrwx 1 root root 10 2007-05-28 13:18 387d6d4b-4508-4b8e-8ed2-76998f41dae4 -> ../../sdb1
rwxrwxrwx 1 root root 10 2007-05-28 13:18 7014f66f-6cdf-4fe1-83da-9cab7b6fab1a -> ../../sdb5
lrwxrwxrwx 1 root root 10 2007-05-28 13:18 8f042ead-259f-4df0-98ec-3343080396c5 -> ../../sdb6
lrwxrwxrwx 1 root root 10 2007-05-28 13:18 94B0AE63B0AE4B94 -> ../../sda2
lrwxrwxrwx 1 root root 10 2007-05-28 13:18 A61820AA18207B85 -> ../../sda1
lrwxrwxrwx 1 root root 10 2007-05-28 13:18 f28725d6-b7b5-4207-8476-36efe1a903ce -> ../../sdb9
lrwxrwxrwx 1 root root 10 2007-05-28 13:18 f855c263-2521-48d3-8ec9-d2d2b69b6635 -> ../../sda3
rwxrwxrwx 1 root root 10 2007-05-28 13:18 <b>f9aa4027-ecdd-4a86-84e2-df2ef73fe14e</b> -> ../../sdb7
</pre>



							<p>No caso acima, <b>f9aa4027-ecdd-4a86-84e2-df2ef73fe14e</b> é a partição a ser colocada na fstab:</p>
<pre>
# &lt;device file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt; &lt;pass&gt;
<b>UUID=f9aa4027-ecdd-4a86-84e2-df2ef73fe14e</b> /media/disk2part7 ext4	auto,users,exec	0 2
</pre>

			<h3>Criação de novos pontos de montagem</h3>
							<p> <span class="highlight-3">Nota:</span> Todo o pomto de montagem necessita de um dirétorio existente. siduction cria estes diretórios como subdiretórios de <span class="highlight-3">/media</span> durante o processo de  instalação, os nomes atribuidos são semelhantes a <span class="highlight-3">diskXpartX</span>.</p>

							<p>Se você alterar a tabela de partiçôes depois da instalação e supondo que você altera o ficheiro fstab, (por exemplo, 2 novas partilões ) o diretório para o ponto de montagem não exist. Você necessita de o criar manualmente.</p>

					  <h5>Exemplo:</h5>

							<p>Primeiro, como root verifique os pontos de montagem existentes:</p>

<pre>
cd /media
ls
</pre>
							<p>a lista dos pontos de montagem e mostrada, por exemplo:</p>
<pre>
disk1part1 disk1part3 disk2part1
</pre>
							<p>Staying in /media, create the mount points of the new partitions:</p>
							<p>Permanecendo em /media, crie os novos pontos de montagem para as partições novas:</p>
<pre>
mkdir disk1part6
mkdir disk2part7
</pre>

							<p>Para testar ou usar as partições imediatamente::</p>
<pre>
mount /dev/sda6 /media/disk1part6
mount /dev/sda6 /media/disk2part7
</pre>
							<p>Depois de um reboot a partição será (ou não) montada automáticament tudo dependendo das opções que você escreveu no fstab. Dê uma vista de olhos às pagens do manual:</p>
<pre>
man mount
man fstab
</pre>

	</div>
	<div class="divider" id="uuid-fstab">
			<h2>Uma visão geral: UUID, como rotular partições e a fstab</h2>
							<p>A nomeação persistente de dispositivos tornou-se possível com a introdução do 'udev' e possui algumas vantagens sobre o método anterior, baseado no 'bus'.</p>

							<p>Enquanto as distribuições Linux e o udev evoluem e a detecção de hardware tem se tornado mais confiável, há um novo número de problemas e mudanças:<br />
				    			<b>1)</b> Se você tiver mais de um controlador de discos SATA/SCSI ou IDE, eles são adicionados em ordem aleatória. Isso pode resultar em nomes como hdX e hdY fazendo rodízio a cada boot. O mesmo vale para sdX e sdY. A nomeação persistente permite que você nunca mais se preocupe com isso.<br />
				    			<b>2)</b> Com a introdução do suporte à nova biblioteca libata pata, todos os seus dispositivos IDE 'hdX' tornar-se-ão 'sdX' num futuro próximo. Por causa da nomeação persisitente, você nem vai notar.<br />
				    			<b>3)</b> Máquinas com controladores tanto IDE quanto SATA são bastante comuns hoje em dia. Com as mudanças na libata mencionadas acima, o primeiro problema irá tornar-se ainda mais comum, porque tanto os HDs de um como do outro serão chamados de sdX.</p>

							<p class="highlight-3">O padrão do siduction, ao ser instalado, é usar UUID na fstab</p>

							<p>Há outros motivos, mas esses são os principais hoje e no futuro próximo. Porisso, o siduction encoraja-o a usar a persistência em suas configurações.</p>

			<h2>Os quatro diferentes esquemas de nomeação persistente:</h2>

					<h4>1. Pelo UUID</h4>

							<p>UUID significa Universally Unique Identifier (Identificador Único Universal) e é um mecanismo para dar a cada sistema de arquivos um identificador único. Ele foi planejado para que colisões sejam improváveis. Todos os sistemas de arquivos Linux, inclusive a swap, aceitam UUID. Já NTFS e FAT não aceitam; porém, ainda assim, elas são listadas na fstab no formato UUID, ou seja "by-uuid", com um identificador único, caracteristicamente com menos caracteres:</p>
<pre>
$ /bin/ls -lF /dev/disk/by-uuid/
total 0
lrwxrwxrwx 1 root root 10 Oct 16 10:27 2d781b26-0285-421a-b9d0-d4a0d3b55680 -> ../../sda1
lrwxrwxrwx 1 root root 10 Oct 16 10:27 31f8eb0d-612b-4805-835e-0e6d8b8c5591 -> ../../sda7
lrwxrwxrwx 1 root root 10 Oct 16 10:27 3FC2-3DDB -> ../../sda6
lrwxrwxrwx 1 root root 10 Oct 16 10:27 5090093f-e023-4a93-b2b6-8a9568dd23dc -> ../../sda2
lrwxrwxrwx 1 root root 10 Oct 16 10:27 912c7844-5430-4eea-b55c-e23f8959a8ee -> ../../sda5
lrwxrwxrwx 1 root root 10 Oct 16 10:27 B0DC1977DC193954 -> ../../sdb1
lrwxrwxrwx 1 root root 10 Oct 16 10:27 bae98338-ec29-4beb-aacf-107e44599b2e -> ../../sdb2
</pre>
							<p>Como se pode ver, as partições FAT e NTFS possuem nomes menores (sda6 e sdb1), mas ainda assim são listadas pelo uuid.</p>

					<h4>2. Pelo rótulo (LABEL)</h4>

							<p>Praticamente todo tipo de sistema de arquivos pode ter um rótulo. Todas as suas partições que possuem um são listadas no diretório /dev/disk/by-label directory:</p>
<pre>
$ ls -lF /dev/disk/by-label
total 0
lrwxrwxrwx 1 root root 10 Oct 16 10:27 data -> ../../sdb2
lrwxrwxrwx 1 root root 10 Oct 16 10:27 data2 -> ../../sda2
lrwxrwxrwx 1 root root 10 Oct 16 10:27 fat -> ../../sda6
lrwxrwxrwx 1 root root 10 Oct 16 10:27 home -> ../../sda7
lrwxrwxrwx 1 root root 10 Oct 16 10:27 root -> ../../sda1
lrwxrwxrwx 1 root root 10 Oct 16 10:27 swap -> ../../sda5
lrwxrwxrwx 1 root root 10 Oct 16 10:27 windows -> ../../sdb1
</pre>
							<p>Ainda que os rótulos sejam formados por nomes reconhecíveis, você precisa ser bastante cauteloso para impedir colisões.</p>

							<p>Os rótulos podem ser mudados usando-se estes comandos:</p>
<pre>
* swap: Crie uma nova partição swap com: mkswap -L &lt;rótulo&gt; /dev/XXX
* ext2/ext3/ext4: e2label /dev/XXX &lt;rótulo&gt;
* jfs: jfs_tune -L &lt;rótulo&gt; /dev/XXX
* xfs: xfs_admin -L &lt;rótulo&gt; /dev/XXX
* fat/vfat: Ainda não há aplicativo que faça isso no Linux...
mas quando criar o sistema de arquivos, use mkdosfs -n &lt;rótulo&gt; &lt;outras opções&gt;.
Você também pode mudar o rótulo no Windows.
* ntfs: ntfslabel /dev/XXX &lt;rótulo&gt; ou mude pelo Windows.
</pre>
							<p class="highlight-3">Tenha cuidado: para que isso funcione corretamente, os rótulos têm de ser únicos! Isso vale ao mesmo tempo para dispositivos USB/firewire, como pendrives, e para discos rígidos. A sintaxe LABEL=/ UUID= é preferível sobre /dev/disk/by-*/ para partições UN*X.</p>



					<h4>3. Pelo id </h4>
							<p>'by-id' cria um nome único baseado no número serial do hardware.</p>

					<h4>4. Pelo path</h4>
							<p>'by-path' cria um nome único baseado na rota física mais curta (de acordo com o sysfs). Tanto "by-id" quanto "by-path" contêm strings que indicam a qual subsistema eles pertencem e assim não estão habilitados para resolver os problemas mencionados no início deste tópico. Não trataremos mais deles aqui.</p>

					<h4>Como ativar a nomeação persistente</h4>

							<p>Tendo escolhido o método de nomeação que você deseja usar, vamos agora ativar a persistência em seu sistema:</p>

					<h4>Na fstab</h4>

							<p>Habilitar persistência no arquivo /etc/fstab é fácil; simplesmente substitua o nome do dispositivo na primeira coluna pelo nome persistente. No exemplo abaixo, vamos substituir /dev/sda7 por um dos seguintes:</p>
<pre>
/dev/disk/by-label/home ou
/dev/disk/by-uuid/31f8eb0d-612b-4805-835e-0e6d8b8c5591
</pre>
							<p>Faça deste mesmo jeito para todas as partições em sua fstab.</p>

							<p>Ao invés de citar o dispositivo explicitamente, pode-se indicar o sistema de arquivos a ser montado por UUID ou pelo seu rótulo do volume, escrevendo LABEL=&lt;rótulo&gt; ou UUID=&lt;uuid&gt;. Por exemplo:</p>
<pre>
LABEL=Boot
</pre>
							<p>ou</p>
<pre>
UUID=3e6be9de-8139-11d1-9106-a43f08d823a6
</pre>
							<p>Fonte: <a href="http://wiki.archlinux.org/index.php/Persistent_block_device_naming">wiki.archlinux.org</a> que usou <a href=" http://marc.theaimsgroup.com/?l=linux-hotplug-devel&amp;m=114795097514527&amp;w=2">marc.theaimsgroup.com</a>. O conteúdo de wiki.archlinux.org é disponibilizado sob a GNU Free Documentation License 1.2 e foi reeditado para o Manual do siduction.</p>

							<p><a href="http://www.lissot.net/partition/ext2fs/labels.html">Mais sobre rotulação ('labelling') pode ser encontrado em lissot.net</a> </p>

	</div>
			<div id="rev">Content last revised 13/01/2012 2330 UTC</div>
</div>
</div>
</body>
</html>
